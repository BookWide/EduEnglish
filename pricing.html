<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BookWide｜方案與定價</title>
<style>
  :root{
    --bg:#f7f8fa;
    --card:#ffffff;
    --text:#111;
    --muted:#6b7280;
    --brand:#111;
    --line:#e5e7eb;
    --primary:#2563eb;
    --soft:#eef2ff;
    --ok:#16a34a;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;
    background:var(--bg);
    color:var(--text);
  }
  header{
    position:sticky; top:0;
    background:var(--bg);
    z-index:10;
    border-bottom:1px solid var(--line);
  }
  .wrap{max-width:1152px; margin:0 auto; padding:18px 16px;}
  .title{font-size:28px; font-weight:800; letter-spacing:.02em;}
  .home-link{
    float:right;
    font-size:15px;
    color:var(--primary);
    text-decoration:none;
    margin-top:6px;
  }
  .home-link:hover{ text-decoration:underline; }

  .notice{
    display:flex; align-items:center; gap:10px;
    background:var(--soft); border:1px dashed #c7d2fe; color:#3730a3;
    padding:12px 14px; border-radius:12px; margin-top:12px;
    line-height:1.4;
  }
  .pill{
    display:inline-flex; align-items:center; gap:8px;
    padding:6px 10px; border-radius:999px;
    background:#fff; border:1px solid #dbeafe; color:#1d4ed8;
    font-size:13px;
  }
  .pill.ok{ border-color:#bbf7d0; color:#166534; }
  .pill b{ font-weight:800; }

  .layout{
    display:grid;
    grid-template-columns: 1.6fr .8fr;
    gap:16px;
    margin-top:14px;
  }

  .panel{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:16px;
    padding:16px;
  }

  .grid{
    margin-top:10px;
    display:grid;
    grid-template-columns: repeat(3, 1fr);
    gap:14px;
  }
  .card{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:14px;
    padding:14px 14px 12px;
    transition:box-shadow .15s, transform .06s;
    min-height:210px;
  }
  .card:hover{ box-shadow:0 6px 18px rgba(0,0,0,.06); transform:translateY(-2px); }

  .card h3{ margin:0 0 6px; font-size:18px; }
  .desc{ margin:0; padding-left:20px; color:#111; }
  .desc li{ margin:6px 0; color:#111; }
  .meta{ font-size:13px; color:var(--muted); margin-top:6px; }

  .choose{
    margin-top:10px;
    display:flex;
    align-items:center;
    gap:10px;
    font-size:14px;
  }
  input[type="checkbox"]{ width:18px; height:18px; accent-color:#111; margin:0; }

  .plans{ display:flex; flex-direction:column; gap:10px; margin-top:10px;}
  .plan{
    background:#111; color:#fff;
    border-radius:14px; padding:10px 12px;
    display:flex; align-items:center; gap:10px;
    border:2px solid #111;
    cursor:pointer;
  }
  .plan.light{
    background:#fff; color:#111;
    border-color:#111;
  }
  .plan input[type="radio"]{ width:16px; height:16px; accent-color:#fff; }
  .plan.light input[type="radio"]{ accent-color:#111; }
  .plan small{ color:rgba(255,255,255,.85); }
  .plan.light small{ color:var(--muted); }

  .summary{
    margin-top:12px;
    border-top:1px dashed var(--line);
    padding-top:12px;
    display:grid;
    gap:8px;
    font-size:14px;
  }
  .row{ display:flex; justify-content:space-between; gap:10px; }
  .row b{ font-weight:800; }
  .muted{ color:var(--muted); }
  .big{
    font-size:18px;
    font-weight:900;
  }

  .cta{ margin-top:14px; display:flex; gap:10px; flex-wrap:wrap; }
  .btn{
    background:#111; color:#fff;
    border-radius:12px; padding:12px 16px;
    border:none; font-size:16px; cursor:pointer;
  }
  .btn.secondary{
    background:#fff; color:#111; border:1px solid var(--line);
  }

  @media (max-width: 980px){
    .layout{ grid-template-columns: 1fr; }
    .grid{ grid-template-columns: repeat(2, 1fr); }
  }
  @media (max-width: 560px){
    .grid{ grid-template-columns: 1fr; }
    .title{ font-size:24px; }
  }
</style>
</head>

<body>
<header>
  <div class="wrap">
    <a class="home-link" href="index.html">← 回首頁</a>
    <div class="title">BookWide｜方案與定價</div>

    <div class="notice" role="status">
      <span class="pill"><b>公告</b></span>
      <span>若價格調整，將提前一個月於此公告。</span>
      <span id="refPill" class="pill ok" style="display:none;">✅ 已套用推薦碼：<b id="refTxt"></b></span>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="layout">
    <!-- Left -->
    <section class="panel" aria-label="主題與方案">
      <h2 style="margin:0 0 8px">選擇主題</h2>
      <div class="muted" style="font-size:14px;">
        你可自由選擇要訂閱的主題數量（每個主題都含影片＋字幕＋測驗）。  
        <b>每週提供 15 支影片</b>（依主題更新）。
      </div>

      <div id="grid" class="grid" aria-label="主題清單"></div>

      <h2 style="margin:18px 0 8px">選擇方案</h2>
      <div class="plans" role="radiogroup" aria-label="方案">
        <label class="plan" data-plan="monthly">
          <input name="plan" type="radio" value="monthly" checked>
          <div>
            <div style="font-weight:900;">月繳 NT$1,000 / 主題</div>
            <small>適合先試用、彈性最高</small>
          </div>
        </label>

        <label class="plan light" data-plan="semi">
          <input name="plan" type="radio" value="semi">
          <div>
            <div style="font-weight:900;">半年 NT$5,400 / 主題</div>
            <small>平均每月更省（一次付清）</small>
          </div>
        </label>

        <label class="plan light" data-plan="yearly">
          <input name="plan" type="radio" value="yearly">
          <div>
            <div style="font-weight:900;">年繳 NT$9,600 / 主題</div>
            <small>最划算（一次付清）</small>
          </div>
        </label>
      </div>
    </section>

    <!-- Right -->
    <aside class="panel" aria-label="結帳摘要">
      <h2 style="margin:0 0 8px">結帳摘要</h2>
      <div class="muted" style="font-size:14px; line-height:1.5;">
        這裡先顯示「原價估算」。<br/>
        <b>推薦折扣（10%）與分潤（10%）會在結帳頁依登入狀態判斷：</b>
        自推不折扣、朋友用你的碼才折扣＋分潤。
      </div>

      <div class="summary">
        <div class="row"><span>已選主題</span><b id="sumTopics">0</b></div>
        <div class="row"><span>方案</span><b id="sumPlan">月繳</b></div>
        <div class="row"><span>每主題價格</span><b id="sumUnit">NT$0</b></div>
        <div class="row"><span class="muted">原價小計</span><b class="muted" id="sumRaw">NT$0</b></div>
        <div class="row" style="border-top:1px dashed var(--line); padding-top:10px; margin-top:4px;">
          <span class="big">預估總計</span><span class="big" id="sumTotal">NT$0</span>
        </div>
        <div class="muted" style="font-size:12px;">
          *實際折扣與稅額（若有）依結帳頁為準。
        </div>
      </div>

      <div class="cta">
        <button id="go" class="btn">前往結帳</button>
        <button id="all" class="btn secondary">全選</button>
        <button id="none" class="btn secondary">全不選</button>
      </div>
    </aside>
  </div>
</main>

<footer style="text-align:center;color:#999;padding:40px 0;">BookWide © 2025</footer>

<script>
/* -----------------------------
   推薦碼（ref）只負責「帶去 checkout」
   折扣/自推判斷要在 checkout（登入後才知道自己是誰）
----------------------------- */
const urlParams = new URLSearchParams(location.search);
const REF_CODE = (urlParams.get('ref') || '').trim();

/* -----------------------------
   價格設定
----------------------------- */
const PRICE = {
  monthly: 1000,
  semi: 5400,
  yearly: 9600
};
const PLAN_LABEL = {
  monthly: '月繳',
  semi: '半年',
  yearly: '年繳'
};

/* -----------------------------
   主題列表（預設）
----------------------------- */
const DEFAULT_TOPICS = [
  { key:'story', title:'故事 Story', description:[
    '分級故事影片與字幕','單字 / 文法 / 閱讀測驗','可列印成績單'
  ], sort:1 },
  { key:'music', title:'音樂 Music', description:[
    '歌曲影片，歌詞雙語字幕','關鍵單詞小測驗','收藏精選歌曲'
  ], sort:2 },
  { key:'movie', title:'電影 Movie', description:[
    '電影片段學英文','情境會話 / 片語重點','主題測驗可列印'
  ], sort:3 },
  { key:'news', title:'實況 News', description:[
    '看情境劇/實況內容學英文','強化詞彙、聽力與口語輸出','每週固定更新'
  ], sort:4 },
  { key:'pro', title:'基礎語法 Grammar', description:[
    '基礎文法動畫課程：時態/句型/介系詞','中英例句與常見錯誤對照','每講附小測驗與練習題'
  ], sort:5 }
];

/* -----------------------------
   UI：推薦碼提示
----------------------------- */
if (REF_CODE) {
  document.getElementById('refPill').style.display = 'inline-flex';
  document.getElementById('refTxt').textContent = REF_CODE;
}

/* -----------------------------
   渲染主題卡片（預設全選，可自行取消）
----------------------------- */
function render(topics){
  const grid = document.getElementById('grid');
  grid.innerHTML = '';
  topics.sort((a,b)=>(a.sort||0)-(b.sort||0)).forEach(t=>{
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML = `
      <h3>${t.title}</h3>
      <ul class="desc">${(t.description||[]).map(li=>`<li>${li}</li>`).join('')}</ul>
      <div class="meta">主題代碼：<b>${t.key}</b></div>
      <label class="choose">
        <input type="checkbox" data-key="${t.key}" checked>
        <span>訂閱這個主題</span>
      </label>
    `;
    grid.appendChild(card);
  });

  // 綁定事件（checkbox）
  [...grid.querySelectorAll('input[type="checkbox"]')].forEach(cb=>{
    cb.addEventListener('change', updateSummary);
  });
}

/* -----------------------------
   取得已選主題
----------------------------- */
function getSelectedTopics(){
  return [...document.querySelectorAll('input[type="checkbox"][data-key]')]
    .filter(i=>i.checked)
    .map(i=>i.dataset.key);
}

/* -----------------------------
   取得方案
----------------------------- */
function getPlan(){
  return document.querySelector('input[name="plan"]:checked')?.value || 'monthly';
}

/* -----------------------------
   更新摘要
----------------------------- */
function updateSummary(){
  const keys = getSelectedTopics();
  const plan = getPlan();
  const unit = PRICE[plan] || 0;
  const raw = unit * keys.length;

  document.getElementById('sumTopics').textContent = String(keys.length);
  document.getElementById('sumPlan').textContent = PLAN_LABEL[plan] || plan;
  document.getElementById('sumUnit').textContent = 'NT$' + unit.toLocaleString();
  document.getElementById('sumRaw').textContent = 'NT$' + raw.toLocaleString();
  document.getElementById('sumTotal').textContent = 'NT$' + raw.toLocaleString();
}

/* -----------------------------
   方案切換事件（radio）
----------------------------- */
[...document.querySelectorAll('input[name="plan"]')].forEach(r=>{
  r.addEventListener('change', ()=>{
    // 視覺切換卡片樣式
    const v = getPlan();
    document.querySelectorAll('.plan').forEach(el=>{
      const p = el.getAttribute('data-plan');
      if (p === v) {
        el.classList.remove('light');
        el.style.background = '#111';
        el.style.color = '#fff';
        el.style.borderColor = '#111';
      } else {
        el.classList.add('light');
        el.style.background = '#fff';
        el.style.color = '#111';
        el.style.borderColor = '#111';
      }
    });
    updateSummary();
  });
});

/* -----------------------------
   全選 / 全不選
----------------------------- */
document.getElementById('all').addEventListener('click', ()=>{
  document.querySelectorAll('input[type="checkbox"][data-key]').forEach(cb=>cb.checked = true);
  updateSummary();
});
document.getElementById('none').addEventListener('click', ()=>{
  document.querySelectorAll('input[type="checkbox"][data-key]').forEach(cb=>cb.checked = false);
  updateSummary();
});

/* -----------------------------
   前往結帳：帶 topics / plan / ref
----------------------------- */
document.getElementById('go').addEventListener('click', ()=>{
  const keys = getSelectedTopics();
  if (!keys.length) {
    alert('請至少選擇 1 個主題再前往結帳。');
    return;
  }
  const plan = getPlan();

  const url = new URL('./checkout.html', location.href);
  url.searchParams.set('topics', keys.join(','));
  url.searchParams.set('plan', plan);
  if (REF_CODE) url.searchParams.set('ref', REF_CODE);

  location.href = url.toString();
});

/* init */
render(DEFAULT_TOPICS);
updateSummary();
</script>
</body>
</html>





















