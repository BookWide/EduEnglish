<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BookWide | 方案與定價</title>
  <style>
    /* 白底黑字（簡潔） */
    :root{
      --bg:#ffffff; --text:#111827; --muted:#6b7280; --panel:#ffffff; --border:#e5e7eb;
      --primary:#111827; --accent:#2563eb; --accent-600:#1d4ed8; --pill:#111827; --pillText:#fff;
      --ok:#16a34a;
    }
    html,body{background:var(--bg); color:var(--text); font-family: ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Microsoft JhengHei",Arial,sans-serif; margin:0}
    .wrap{max-width:1100px; margin:28px auto; padding:0 16px;}
    h1{font-size:28px; margin:4px 0 18px 0}
    .muted{color:var(--muted)}
    .grid{display:grid; grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); gap:18px; margin-top:8px}
    .card{border:1px solid var(--border); border-radius:14px; padding:18px; background:var(--panel)}
    .card h3{margin:0 0 8px 0}
    .ul{margin:8px 0 0 16px; padding:0}
    .price{font-size:22px; font-weight:700; margin:6px 0 10px}
    .choose{display:flex; gap:8px; align-items:center; margin-top:10px}
    .badge{display:inline-block; padding:2px 10px; border-radius:999px; background:var(--pill); color:var(--pillText); font-size:13px}
    .panel{border:1px solid var(--border); border-radius:14px; padding:18px; margin-top:22px}
    .period{display:flex; gap:16px; align-items:center; flex-wrap:wrap}
    .sum{margin-top:6px; font-weight:600}
    .btn{display:inline-block; margin-top:14px; padding:14px 22px; border-radius:10px; background:var(--accent); color:#fff; font-weight:700; text-decoration:none}
    .btn:hover{background:var(--accent-600)}
    .ok{color:var(--ok); font-weight:700}
    .refline{margin:8px 0 0 0}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>BookWide | 方案與定價</h1>
    <p class="muted">每個主題皆為 <b>NT$200 / 月</b>；可一次勾選多個主題一起結帳。</p>

    <!-- 方案卡片 -->
    <div class="grid" id="planGrid">
      <div class="card">
        <h3>故事 Story</h3>
        <div class="price">NT$200 / 月</div>
        <ul class="ul">
          <li>分級故事影片與字幕</li>
          <li>單字 / 文法 / 閱讀測驗</li>
          <li>可列印成績單</li>
        </ul>
        <label class="choose"><input type="checkbox" class="ck-item" value="story"> 勾選這個主題</label>
      </div>

      <div class="card">
        <h3>音樂 Music</h3>
        <div class="price">NT$200 / 月</div>
        <ul class="ul">
          <li>歌曲影片、歌詞雙語字幕</li>
          <li>關鍵單詞小測驗</li>
          <li>收藏精選歌曲</li>
        </ul>
        <label class="choose"><input type="checkbox" class="ck-item" value="music"> 勾選這個主題</label>
      </div>

      <div class="card">
        <h3>電影 Movie</h3>
        <div class="price">NT$200 / 月</div>
        <ul class="ul">
          <li>電影片段學英文</li>
          <li>情境會話 / 片語重點</li>
          <li>主題測驗可列印</li>
        </ul>
        <label class="choose"><input type="checkbox" class="ck-item" value="movie"> 勾選這個主題</label>
      </div>
    </div>

    <!-- 付款週期 + 推薦碼顯示 + 前往結帳 -->
    <div class="panel">
      <div class="period">
        <span class="muted">選擇方案週期：</span>
        <label><input type="radio" name="period" value="month" checked> 月繳 NT$200 / 主題</label>
        <label><input type="radio" name="period" value="half"> 半年 NT$960 / 主題</label>
        <label><input type="radio" name="period" value="year"> 年繳 NT$1680 / 主題</label>
      </div>

      <div class="refline" id="refLine" style="display:none">
        <span class="badge" id="refBadge"></span>
        <span class="ok">已套用推薦碼，結帳頁會自動帶入。</span>
      </div>

      <div id="sumLine" class="sum">0 個主題，合計 NT$0</div>

      <a id="btnGo" class="btn" href="javascript:;">前往結帳</a>
      <div class="muted" style="margin-top:8px;">點擊後將導向結帳頁（checkout.html），並自動帶上你已勾選的主題與週期，若有推薦碼也會一併帶上。</div>
    </div>
  </div>

  <script>
    (function(){
      // 1) 若網址帶 ref，先存進 localStorage
      const usp = new URLSearchParams(location.search);
      const urlRef = usp.get('ref');
      if (urlRef) localStorage.setItem('referral_code', urlRef);

      // 2) 讀取 localStorage 中的推薦碼，若有則顯示提示
      const referral = localStorage.getItem('referral_code') || '';
      const refLine = document.getElementById('refLine');
      const refBadge = document.getElementById('refBadge');
      if (referral) {
        refBadge.textContent = `推薦碼：${referral}`;
        refLine.style.display = '';
      }

      // 3) 元素
      const ckItems = Array.from(document.querySelectorAll('.ck-item'));
      const sumLine = document.getElementById('sumLine');
      const btnGo = document.getElementById('btnGo');
      const PERIOD_PRICE = { month:200, half:960, year:1680 };

      // 4) 即時顯示合計（僅提示）
      function refreshSum(){
        const count = ckItems.filter(x => x.checked).length;
        const period = (document.querySelector('input[name="period"]:checked')||{}).value || 'month';
        const unit = PERIOD_PRICE[period] ?? 200;
        sumLine.textContent = `${count} 個主題，合計 NT$${count * unit}`;
      }
      ckItems.forEach(x => x.addEventListener('change', refreshSum));
      document.querySelectorAll('input[name="period"]').forEach(x => x.addEventListener('change', refreshSum));
      refreshSum();

      // 5) 前往結帳：組合 items、period、以及（若存在）ref，一起帶到 checkout.html
      btnGo.addEventListener('click', () => {
        const items = ckItems.filter(x => x.checked).map(x => x.value);
        if (items.length === 0) {
          alert('請至少勾選 1 個主題。');
          return;
        }
        const period = (document.querySelector('input[name="period"]:checked')||{}).value || 'month';
        const params = new URLSearchParams({ items: items.join(','), period });
        if (referral) params.set('ref', referral);
        location.href = `./checkout.html?${params.toString()}`;
      });
    })();
  </script>
</body>
</html>



















