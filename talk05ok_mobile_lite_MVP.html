<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Talk Â· Mobile Lite MVP</title>
<style>
:root{--bg:#0b0b0c;--fg:#fff;--muted:#9aa0a6;--accent:#4da3ff}
*{box-sizing:border-box}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--fg)}
header{display:flex;align-items:center;gap:8px;padding:10px 12px;border-bottom:1px solid #1f2228}
header .wk{font-weight:600}
header .prog{margin-left:auto;color:var(--accent)}
main{padding:12px;max-width:520px;margin:0 auto}
.teacher{display:flex;gap:10px;align-items:flex-start}
.avatar{width:44px;height:44px;border-radius:50%;background:#333}
.line{flex:1}
.en{font-size:16px;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.zh{font-size:13px;color:var(--muted);margin-top:6px}
.answer{margin-top:14px}
.blank{padding:10px;border:1px solid #2a2e36;border-radius:10px;min-height:44px}
.choices{display:flex;gap:8px;margin-top:10px}
.choices button{flex:1;font-size:12px;padding:8px;border-radius:999px;border:1px solid #2a2e36;background:#12151b;color:#fff}
.actions{display:flex;gap:8px;margin-top:10px}
.actions button{flex:1;padding:10px;border-radius:10px;border:0}
.submit{background:var(--accent);color:#001}
.skip{background:#2a2e36;color:#fff}
.note{margin-top:10px;color:var(--muted);font-size:12px}
@media (min-width:521px){ body{background:#111} }
</style>
</head>
<body>
<header>
  <button onclick="history.back()">â†</button>
  <div class="wk" id="wk">W1</div>
  <div class="prog" id="prog">1/15</div>
</header>
<main>
  <section class="teacher">
    <div class="avatar"></div>
    <div class="line">
      <div class="en" id="en">Loadingâ€¦</div>
      <div class="zh" id="zh"></div>
    </div>
  </section>

  <section class="answer">
    <div class="blank" id="blank"></div>
    <div class="choices" id="choices"></div>
    <div class="actions">
      <button class="submit" id="submit">é€å‡ºå¡«å¥½å¥</button>
      <button class="skip" id="skip">è·³é</button>
    </div>
    <div class="note">iPhoneï¼šè«‹ç”¨éµç›¤ ğŸ¤ è½å¯«</div>
  </section>
</main>

<script>
// ---- Minimal data loader ----
const state={week:1,idx:1,total:15,data:null,answer:''};
async function load(){
  const res=await fetch('index.json').catch(()=>null);
  if(!res) return;
  const idx=await res.json();
  // expect idx.weeks[week].scenes[0]
  const first=(idx.weeks?.[state.week]?.scenes||[])[0];
  if(!first) return;
  const s=await fetch(first).then(r=>r.json());
  state.data=s;
  render();
}
function render(){
  document.getElementById('wk').textContent='W'+state.week;
  document.getElementById('prog').textContent=state.idx+'/'+state.total;
  document.getElementById('en').textContent=state.data.teacher;
  document.getElementById('zh').textContent=state.data.zh||'';
  document.getElementById('blank').textContent=state.answer||state.data.prompt;
  const c=document.getElementById('choices'); c.innerHTML='';
  (state.data.choices||[]).slice(0,3).forEach(w=>{
    const b=document.createElement('button'); b.textContent=w;
    b.onclick=()=>{ state.answer=(state.answer||state.data.prompt).replace('____',w); document.getElementById('blank').textContent=state.answer; };
    c.appendChild(b);
  });
}
document.getElementById('submit').onclick=()=>{
  state.idx++; state.answer=''; render();
};
document.getElementById('skip').onclick=()=>{
  state.idx++; state.answer=''; render();
};
load();
</script>
</body>
</html>
