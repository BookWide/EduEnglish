<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BookWide｜結帳</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    :root{--bg:#f4f6fb;--card:#fff;--ink:#0f172a;--muted:#64748b;--line:#e5e7eb;--brand:#2563eb;--radius:18px;--shadow:0 10px 30px rgba(15,23,42,.08)}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif}
    .wrap{max-width:1100px;margin:24px auto;padding:0 18px}
    .top{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:18px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:12px 16px;border-radius:999px;border:1px solid var(--line);background:#fff;cursor:pointer;box-shadow:var(--shadow);font-weight:800}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff;box-shadow:none}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;background:#fff;box-shadow:var(--shadow);border:1px solid var(--line);color:var(--muted);font-size:14px}
    h1{font-size:44px;margin:8px 0 16px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:28px;box-shadow:var(--shadow);padding:20px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:14px 16px;border:1px solid var(--line);border-radius:18px;background:#fff;cursor:pointer}
    .row.active{outline:2px solid rgba(37,99,235,.35);border-color:rgba(37,99,235,.35)}
    .muted{color:var(--muted)}
    .danger{color:#b91c1c;font-weight:900}
    .ok{color:#065f46;font-weight:900}
    pre{white-space:pre-wrap;word-break:break-word;background:#0b1220;color:#e5e7eb;border-radius:14px;padding:12px;border:1px solid rgba(255,255,255,.08)}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <a class="btn" href="/index.html">← 回首頁</a>
      <div id="who" class="pill">未登入</div>
    </div>

    <h1>結帳</h1>

    <div class="grid">
      <div class="card">
        <div class="muted" style="margin-bottom:10px">選擇方案：</div>

        <div id="plan_month" class="row">
          <div>
            <div style="font-weight:900">月方案</div>
            <div class="muted">NT$ 1,000</div>
          </div>
          <div style="font-weight:900">NT$ 1,000</div>
        </div>

        <div id="plan_half" class="row">
          <div>
            <div style="font-weight:900">半年方案</div>
            <div class="muted">NT$ 5,400</div>
          </div>
          <div style="font-weight:900">NT$ 5,400</div>
        </div>

        <div id="plan_year" class="row">
          <div>
            <div style="font-weight:900">一年方案</div>
            <div class="muted">NT$ 9,600</div>
          </div>
          <div style="font-weight:900">NT$ 9,600</div>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px">
          <button id="payBtn" class="btn primary">綠界付款（Stage）</button>
          <a class="btn" href="/account/subscription.html">看我的訂閱</a>
        </div>

        <div id="msg" class="muted" style="margin-top:12px"></div>
      </div>

      <div class="card">
        <div style="font-weight:900;margin-bottom:10px">Debug</div>
        <div class="muted">如果按下付款沒反應，把下方貼給我：</div>
        <pre id="debug">waiting…</pre>
      </div>
    </div>
  </div>

  <script>
    // ✅ 你目前可先放前端（ANON 不算秘密），但正式上線建議放到 /shared/config.js
    const SUPABASE_URL = "https://jeajrwpmrgczimmrflxo.supabase.co";
    const SUPABASE_ANON_KEY = "YOUR_ANON_KEY"; // ← 你自己填上（你剛剛貼的那串）

    const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // ===== helpers =====
    const $ = (id)=>document.getElementById(id);
    const debug = (o)=>{ $("debug").textContent = (typeof o==="string") ? o : JSON.stringify(o,null,2); };
    const setMsg = (t, cls="muted")=>{ $("msg").className = cls; $("msg").textContent = t; };

    // plan resolve











































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































