<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BookWide ¬∑ player.html (auto GitHub JSON)</title>
<style>
:root{ --bg:#0b1324; --panel:#0f172a; --border:#1f2a44; --ink:#e6f0ff; --muted:#9fb0c9; --accent:#3c7cff; }
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:ui-sans-serif,system-ui,"Noto Sans TC"}
header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;background:#0f172a;border-bottom:1px solid #0e203f}
.wrap{padding:16px;height:calc(100vh - 58px);}
.layout{height:100%;display:grid;grid-template-columns:1fr 1fr;gap:16px;overflow-x:hidden; overflow-y:auto}
.left,.right{min-width:0;background:var(--panel);border:1px solid var(--border);border-radius:12px}
.left{display:flex;flex-direction:column;padding:14px;position:sticky;top:0;align-self:start;z-index:10}
.right{display:flex;flex-direction:column;overflow-y:auto;scrollbar-width:thin;position:relative}
.right::-webkit-scrollbar{width:10px}
.right::-webkit-scrollbar-thumb{background:#556a9a;border-radius:6px}
.videoWrap{position:relative;width:100%;aspect-ratio:16/9;background:#000;border-radius:10px;overflow:hidden}
.videoWrap video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;background:#000}
.controls{margin-top:12px;background:#0e2038;border:1px solid #183459;border-radius:12px;padding:12px}
.controls .row{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:.25rem 0}
.btn{background:#13233f;border:1px solid #24446f;border-radius:10px;padding:8px 12px;color:#fff;cursor:pointer}
.btn.blue{background:#14335f;border-color:#2c5aa3}
.muted{color:var(--muted)}
.tabs{display:flex;gap:8px;padding:6px 10px;margin:0 0 2px;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:20;background:var(--panel)}
.tab{cursor:pointer;background:#122340;border:1px solid #1f375f;border-radius:12px;padding:10px 14px;font-weight:600}
.tab.active{background:#154274}
table{width:100%;border-collapse:collapse}
th,td{padding:10px 12px;border-bottom:1px solid #162a48;vertical-align:top}
tbody tr{background:#0f1f34}
tbody tr:nth-child(2n){background:#0d1a2b}
tbody tr:hover{background:#0f2a4e}
tr.active{background:#173a6e}
.cues-table{table-layout:fixed}
.cue-time{width:64px;min-width:64px;color:rgba(255,255,255,.7);font-family:ui-monospace,Consolas,monospace;white-space:nowrap}
.cue-en{line-height:1.6;word-break:break-word;position:relative}
.cue-en .zh-line{margin-top:6px;opacity:.95}
.ja-line{margin-top:6px;opacity:.95}
tr.speaking::before{content:"üîä";position:absolute;left:8px;transform:translateY(4px);opacity:.95}
tr.speaking td{padding-left:26px!important}
#pane-sub thead th{ position: sticky; top: 44px; background: var(--panel); z-index: 10; }
@media (max-width:860px) and (orientation:portrait){
  #track{ display:flex; overflow-x:auto; overflow-y:hidden; gap:0; scroll-snap-type:x mandatory; }
  .page{ flex:0 0 100vw; max-width:100vw; height:calc(100vh - 58px); scroll-snap-align:start; overflow-y:auto; }
  .left,.right{ width:100%; max-width:100%; border-radius:0; border-left:0; border-right:0; }
  #btnExitFocus{ position:fixed; right:16px; bottom:16px; z-index:10020; display:none;
    padding:10px 14px; border:1px solid rgba(100,116,139,.5); background:#0f172a; color:#e6efff; border-radius:12px; }
  body.at-right #btnExitFocus{ display:inline-flex; }
}
</style>
</head>
<body>
<header>
  <h1>Êí≠ÊîæÂô®</h1>
  <div id="authArea" style="display:flex;gap:10px;align-items:center">
    <span class="muted" id="userNameBadge"></span>
  </div>
</header>

<div class="wrap">
  <div id="track" class="layout">
    <section class="page" id="pageLeft">
      <section class="left" id="videoContainer">
        <div class="videoWrap"><video id="player" playsinline controls></video></div>
        <div class="controls">
          <div class="row">
            <button class="btn" id="btnPrev">‚èÆ ‰∏ä‰∏ÄÂè•</button>
            <button class="btn" id="btnPlay">‚ñ∂Ô∏è Êí≠Êîæ / Êö´ÂÅú</button>
            <button class="btn" id="btnNext">‚è≠ ‰∏ã‰∏ÄÂè•</button>
            <button class="btn" id="btnReplay">üîÅ ÈáçË§áÊú¨Âè•</button>
          </div>
          <div class="row">
            <label class="chip"><input id="chkFollow" type="checkbox"/> Ë∑üÈö®</label>
            <span class="chip">ÂÅèÁßª <span id="offsetVal">0.0s</span></span>
            <button class="btn" id="btnOffsetMinus">-0.5s</button>
            <button class="btn" id="btnOffsetPlus">+0.5s</button>
            <button class="btn" id="btnAutoSync">üß≠ Á∞°ÊòìÊ†°Ê∫ñ</button>
          </div>
          <div class="row" id="speedRow" style="display:flex;align-items:center;gap:8px">
            <span class="muted">ÈÄüÂ∫¶</span>
            <input id="speedRange" type="range" min="0.5" max="2" step="0.05" value="1"/>
            <span id="speedVal">1.00x</span>
          </div>
        </div>
      </section>
    </section>

    <section class="page" id="pageRight">
      <section class="right" id="studyContainer">
        <div class="tabs">
          <div class="tab active" data-tab="sub">Â≠óÂπï</div>
          <div class="tab" data-tab="quiz">Ê∏¨È©ó</div>
          <div class="tab" data-tab="vocab">ÂñÆÂ≠ó</div>
          <div class="tab" data-tab="ai">AI‰∫íÂãï</div>
        </div>

        <div class="pane" id="pane-sub">
          <div class="muted" id="cuesStatus" style="padding:10px 14px">ÔºàÂ≠óÂπïËºâÂÖ•‰∏≠‚Ä¶Ôºâ</div>
          <table class="cues-table">
            <thead><tr><th style="width:80px">ÊôÇÈñì</th><th>Ëã±Êñá / ‰∏≠Êñá / Êó•Êñá</th></tr></thead>
            <tbody id="cuesBody"></tbody>
          </table>
        </div>

        <div class="pane" id="pane-quiz" style="display:none">
          <div class="quiz-shell">
            <div class="muted" id="quizMeta" style="padding:8px 12px">ÔºàÊ∏¨È©óËºâÂÖ•‰∏≠‚Ä¶Ôºâ</div>
            <ol id="quizList" style="line-height:1.6;padding:0 12px"></ol>
            <div class="q-actions" style="margin:14px 12px 6px; display:flex; gap:8px; align-items:center;">
              <button class="btn" id="btnSubmitQuiz">‰∫§Âç∑</button>
              <button class="btn" id="btnShowAnswer" >È°ØÁ§∫Á≠îÊ°à</button>
              <button class="btn" id="btnPrint" >ÂàóÂç∞ÊàêÁ∏æÂñÆ</button>
              <span id="quizScore" style="margin-left:8px"></span>
            </div>
          </div>
        </div>

        <div class="pane" id="pane-vocab" style="display:none">
          <div class="muted" id="vocabStatus" style="padding:10px 14px">( ÂñÆÂ≠óËºâÂÖ•‰∏≠‚Ä¶ )</div>
          <div id="vocabBox" style="padding:0 14px 14px"></div>
        </div>

        <div class="pane" id="pane-ai" style="display:none">
          <div class="pane-ai" style="padding:10px">
            <div class="ai-row" style="margin:6px 0 10px">
              <span class="muted">Á∂≤ÂùÄÊ†ºÂºèÔºö<code>?cat=story|music|movie|news|pro&slug=houyi</code></span>
            </div>
            <div class="ai-row" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
              <select id="aiTopic" class="btn" style="min-width:200px"></select>
              <button id="btnPrevTopic" class="btn">‚óÄ ‰∏ä‰∏ÄÈ°å</button>
              <button id="btnNextTopic" class="btn">‰∏ã‰∏ÄÈ°å ‚ñ∂</button>
              <button id="btnTts" class="btn">üîà ÊúóËÆÄ</button>
              <button id="btnRec" class="btn">üéôÔ∏è ÈñãÂßãË™™</button>
              <button id="btnStop" class="btn" disabled>‚õî ÂÅúÊ≠¢</button>
              <label style="font-size:13px;opacity:.9"><input id="aiAutoNext" type="checkbox"> ‰ΩúÁ≠îÂæåËá™Âãï‰∏ã‰∏ÄÈ°å</label>
              <span id="aiProgress" class="muted">Á¨¨ 0/0 È°å</span>
            </div>
            <div class="ai-row" style="margin-top:6px">
              <textarea id="aiPrompt" rows="3" placeholder="È°åÁõÆÊúÉÈ°ØÁ§∫Âú®ÈÄôË£°‚Ä¶" readonly style="width:100%"></textarea>
            </div>
            <div class="ai-row" style="margin:6px 0 8px">
              <span class="muted">ÊèêÁ§∫Ôºö<span id="aiHint">‚Äî</span></span>
            </div>
            <div style="margin:10px 0 6px;display:flex;gap:8px;align-items:center"><span style="opacity:.9">AI Á§∫ÁØÑÔºö</span><button id="aiDemo" class="btn">Á§∫ÁØÑÂè•</button><button id="aiDemoTts" class="btn">ÊúóËÆÄ</button></div>
            <div class="ai-row">
              <div class="ai-out" id="aiReply" style="min-height:54px;border:1px solid #223048;border-radius:10px;padding:10px">ÔºàÁ≠âÂæÖ‰Ω†ÁöÑ‰ΩúÁ≠î‚Ä¶Ôºâ</div>
            </div>
          </div>
        </div>

      </section>
    </section>
  </div>
</div>

<button id="btnExitFocus" class="btn" style="display:none">ËøîÂõûÂΩ±Áâá</button>

<script>
const $=(s,e=document)=>e.querySelector(s);
const $$=(s,e=document)=>[...e.querySelectorAll(s)];
const toSec=t=>{ if(typeof t==='number')return t; const p=String(t).split(':').map(Number);
  if(p.length===3)return p[0]*3600+p[1]*60+p[2]; if(p.length===2)return p[0]*60+p[1]; return Number(t)||0; };
const fmt=sec=>{ sec=Math.max(0,sec|0); const m=(sec/60)|0,s=sec%60; return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;}
const esc=s=>String(s??'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');

const params=new URLSearchParams(location.search);
const paramBase=params.get('base');
const BASE = paramBase || (location.host.includes('github.io')? '/EduEnglish' : 'https://bookwide.github.io/EduEnglish');
const cat=(params.get('cat')||'story').toLowerCase();
let slug=params.get('slug')||'houyi'; if(slug==='huyi') slug='houyi';
const vnow = Date.now();

const video=$('#player'); const cuesBody=$('#cuesBody'); const cuesStatus=$('#cuesStatus');
const btnPrev=$('#btnPrev'),btnPlay=$('#btnPlay'),btnNext=$('#btnNext'),btnReplay=$('#btnReplay');
const btnOffsetMinus=$('#btnOffsetMinus'),btnOffsetPlus=$('#btnOffsetPlus'),offsetVal=$('#offsetVal');
const chkFollow=$('#chkFollow'); const speedRange=$('#speedRange'),speedVal=$('#speedVal');
const paneSub=$('#pane-sub'),paneQuiz=$('#pane-quiz'),paneVocab=$('#pane-vocab');

let cues=[]; let offset=0; let loopSentence=false;
function setOffset(v){offset=Number(v)||0; offsetVal.textContent=`${offset.toFixed(1)}s`; localStorage.setItem(`offset:${slug}`,String(offset));}
window.player={ setOffset, clearRepeat:()=>{ loopSentence=false; btnReplay?.classList.remove('blue'); } };

async function loadVideo(){
  const SUPA_PUBLIC_BASE='https://jeajrwpmrgczimmrflxo.supabase.co/storage/v1/object/public';
  const SUPA_VIDEOS_BASE=SUPA_PUBLIC_BASE+'/videos';
  const trySources=[
    `${SUPA_VIDEOS_BASE}/${cat}/${slug}.mp4`,
    `${BASE}/videos/${cat}/${slug}.mp4`,
    `${BASE}/videos/${slug}.mp4`,
    `${BASE}/videos/story/houyi.mp4`
  ];
  let i=0; function setSrc(idx){ video.src=trySources[idx]; } setSrc(0);
  video.addEventListener('error',()=>{ if(i<trySources.length-1){ i++; setSrc(i); } },{passive:true});
}

async function loadCues(){
  cuesStatus.textContent='ÔºàÂ≠óÂπïËºâÂÖ•‰∏≠‚Ä¶Ôºâ';
  const url=`${BASE}/data/${cat}/${slug}/cues-${slug}.json?v=${vnow}`;
  try{
    const r=await fetch(url,{cache:'no-store'});
    if(!r.ok) throw 0;
    const data=await r.json();
    cues=(Array.isArray(data)?data: (data.cues||[])).map(x=>({t:toSec(x.time),en:x.en||'',zh:x.zh||'',ja:x.ja||''}));
    cuesBody.innerHTML=cues.map((c,i)=>`<tr data-i="${i}" style="position:relative">
      <td class="cue-time">${c.t?fmt(c.t):''}</td>
      <td class="cue-en">
        <span class="en-line">${esc(c.en)}</span>
        ${c.zh?`<div class="zh-line">${esc(c.zh)}</div>`:''}
        ${c.ja?`<div class="ja-line">${esc(c.ja)}</div>`:''}
      </td>
    </tr>`).join('');
    cuesBody.addEventListener('click', e=>{
      const tr=e.target.closest('tr'); if(!tr) return;
      const i=+tr.dataset.i;
      if(chkFollow.checked){ seekTo(i,true); return; }
      let lang='en-US', text='';
      if(e.target.closest('.ja-line')){ lang='ja-JP'; text=e.target.closest('.ja-line').textContent.trim(); }
      else if(e.target.closest('.zh-line')){ lang='zh-TW'; text=e.target.closest('.zh-line').textContent.trim(); }
      else { lang='en-US'; text=(tr.querySelector('.en-line')?.textContent||'').trim(); }
      if(!text) return;
      speakText(text,lang);
      highlightRow(i,true);
    },true);
    cuesStatus.textContent=`Â∑≤ËºâÂÖ•Ôºö${url}`;
  }catch{ cuesStatus.textContent='‚ö†Ô∏è Â≠óÂπïËÆÄÂèñÂ§±ÊïóÔºö' + url; }
}

async function loadQuiz(){
  const meta=$('#quizMeta'); const url=`${BASE}/data/${cat}/${slug}/quiz-${slug}.json?v=${vnow}`;
  try{ const r=await fetch(url,{cache:'no-store'}); if(!r.ok) throw 0; const data=await r.json();
    meta.textContent=`Â∑≤ËºâÂÖ•Ôºö${url}`;
    const ol=$('#quizList'); ol.innerHTML=(data||[]).map((q,idx)=>`<li style="padding:8px 0">
      <div style="font-weight:700">${esc(q.question||q.q||'')}</div>
      ${(q.options||[]).map(op=>`<div><label><input type="radio" name="q_${idx}" value="${esc(op)}"> ${esc(op)}</label></div>`).join('')}
      <div class="ans muted" data-ans="${esc(String(q.answer??''))}" style="display:none;margin-top:6px">Á≠îÊ°àÔºö${esc(String(q.answer??''))}</div>
    </li>`).join('');
    $('#btnShowAnswer').onclick=()=>$$('#quizList .ans').forEach(a=>a.style.display='block');
    $('#btnSubmitQuiz').onclick=()=>{
      let s=0,t=0; $$('#quizList > li').forEach(li=>{
        const ans=li.querySelector('.ans')?.dataset?.ans||'';
        const ch=[...li.querySelectorAll('input[type=radio]')].find(r=>r.checked)?.value||'';
        if(ans.toLowerCase()===ch.toLowerCase()) s++; t++;
      }); $('#quizScore').textContent=`ÂæóÂàÜÔºö${s} / ${t}`;
    };
    $('#btnPrint').onclick=()=>window.print();
  }catch{ meta.textContent='‚ùå È°åÂ∫´ËÆÄÂèñÂ§±Êïó'; }
}
async function loadVocab(){
  const vStatus=$('#vocabStatus'), vBox=$('#vocabBox');
  const url=`${BASE}/data/${cat}/${slug}/vocab-${slug}.json?v=${vnow}`;
  try{ const r=await fetch(url,{cache:'no-store'}); if(!r.ok) throw 0; const list=await r.json();
    if(!list?.length){ vStatus.textContent='‚ö†Ô∏è Êü•ÁÑ°ÂñÆÂ≠óË≥áÊñô'; vBox.innerHTML=''; return; }
    vStatus.textContent=`Â∑≤ËºâÂÖ•Ôºö${url}`;
    vBox.innerHTML=list.map(v=>`<div class="voc" style="border:1px solid #223048;border-radius:10px;padding:10px;margin:10px 0">
      <div style="font-weight:800;font-size:18px">${esc(v.word||'')}</div>
      ${v.zh?`<div>„Äê‰∏≠„Äë${esc(v.zh)}</div>`:''}
      ${v.en?`<div>„ÄêËã±„Äë${esc(v.en)}</div>`:''}
      ${v.ja?`<div>„ÄêÊó•„Äë${esc(v.ja)}</div>`:''}
      <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
        ${v.time?`<button class="btn" data-act="jump" data-time="${esc(v.time)}">Ë∑≥Âà∞ÁâáÊÆµ</button>`:''}
        ${v.en?`<button class="btn" data-act="speak" data-lang="en-US" data-text="${esc(v.en)}">üîä Ëã±</button>`:''}
        ${v.zh?`<button class="btn" data-act="speak" data-lang="zh-TW" data-text="${esc(v.zh)}">üîä ‰∏≠</button>`:''}
        ${v.ja?`<button class="btn" data-act="speak" data-lang="ja-JP" data-text="${esc(v.ja)}">üîä Êó•</button>`:''}
      </div>
    </div>`).join('');
    vBox.addEventListener('click',e=>{
      const act=e.target?.dataset?.act; if(!act) return;
      if(act==='jump'){ const p=toSec(e.target.dataset.time||0); video.currentTime=Math.max(0,p); video.play(); }
      if(act==='speak'){ speakText(e.target.dataset.text||'', e.target.dataset.lang||'en-US'); }
    });
  }catch{ vStatus.textContent='‚ö†Ô∏è ËÆÄÂèñÂ§±Êïó'; }
}

async function loadAI(){
  const url=`${BASE}/data/${cat}/${slug}/ai-${slug}.json?v=${vnow}`;
  try{
    const r=await fetch(url,{cache:'no-store'}); if(!r.ok) throw 0; const data=await r.json();
    const topics = Array.isArray(data)?data : (data.topics||[]);
    const sel=$('#aiTopic'); sel.innerHTML = topics.map((t,i)=>`<option value="${i}">${esc(t.title||t.q||('È°åÁõÆ'+(i+1)))}</option>`).join('');
    const prompt=$('#aiPrompt'), hint=$('#aiHint'), demo=$('#aiReply'); const total=topics.length; let idx=0;
    function render(){ const t=topics[idx]||{}; prompt.value=t.prompt||t.q||''; hint.textContent=t.hint||''; demo.textContent=t.sample||t.demo||'ÔºàÁ≠âÂæÖ‰Ω†ÁöÑ‰ΩúÁ≠î‚Ä¶Ôºâ'; $('#aiProgress').textContent=`Á¨¨ ${idx+1}/${total} È°å`; sel.value=String(idx); }
    render();
    sel.onchange=()=>{ idx=+sel.value|0; render(); };
    $('#btnPrevTopic').onclick=()=>{ idx=(idx-1+total)%total; render(); };
    $('#btnNextTopic').onclick=()=>{ idx=(idx+1)%total; render(); };
    $('#btnTts').onclick=()=>speakText(prompt.value,'en-US');
    $('#aiDemo').onclick =()=>{ const t=topics[idx]||{}; $('#aiReply').textContent=t.sample||t.demo||''; };
    $('#aiDemoTts').onclick=()=>{ const t=topics[idx]||{}; const text=t.sample||t.demo||''; speakText(text,'en-US'); };
  }catch{}
}

function showTab(name){
  paneSub.style.display=name==='sub'?'':'';
  paneQuiz.style.display=name==='quiz'?'':'';
  paneVocab.style.display=name==='vocab'?'':'';
  $('#pane-ai').style.display = name==='ai' ? '' : 'none';
  $$('.tabs .tab').forEach(t=>t.classList.toggle('active',t.dataset.tab===name));
  if (name!=='sub' && window.matchMedia('(max-width: 860px) and (orientation: portrait)').matches) {
    const track = document.getElementById('track');
    track.scrollTo({left:track.clientWidth, behavior:'smooth'});
    document.body.classList.add('at-right');
  }
}
$$('.tabs .tab').forEach(t=>t.addEventListener('click',()=>showTab(t.dataset.tab)));

const videoEl = document.getElementById('player');
speedRange.addEventListener('input',()=>{ const r=Number(speedRange.value)||1; videoEl.playbackRate=r; speedVal.textContent=`${r.toFixed(2)}x`; });
btnPlay.addEventListener('click',()=>{ if(videoEl.paused) videoEl.play(); else videoEl.pause(); });
function currentIndex(){ const t=videoEl.currentTime+offset; let i=0; while(i+1<cues.length&&cues[i+1].t<=t+0.0001)i++; return i; }
function highlightRow(idx){
  const trs=$$('#cuesBody tr'); trs.forEach(tr=>tr.classList.remove('active','speaking'));
  const tr=trs[idx]; if(!tr) return; tr.classList.add('active','speaking');
  const container=$('#pane-sub'); if(container){
    const targetTop=tr.offsetTop - container.clientHeight/2 + tr.offsetHeight/2;
    container.scrollTo({ top: Math.max(0,targetTop), behavior:'smooth' });
  }
}
function seekTo(idx,play=true){ if(!cues[idx])return; videoEl.currentTime=Math.max(0,cues[idx].t-offset+0.0001); highlightRow(idx); if(play) videoEl.play(); }
function sentenceRange(i){ if(!cues[i])return[0,0]; const s=cues[i].t,e=(i+1<cues.length?cues[i+1].t:s+3); return[s,e]; }
btnPrev.addEventListener('click',()=>seekTo(Math.max(0,currentIndex()-1),true));
btnNext.addEventListener('click',()=>seekTo(Math.min(cues.length-1,currentIndex()+1),true));
(function(){ const btn=btnReplay; const on=()=>{btn.dataset.active='1';btn.classList.add('blue')}; const off=()=>{btn.dataset.active='0';btn.classList.remove('blue');loopSentence=false}; off(); btn.addEventListener('click',function(e){ const isOn=btn.dataset.active==='1'; if(isOn){ e.stopImmediatePropagation(); window.player.clearRepeat(); off(); return; } loopSentence=true; on(); seekTo(currentIndex(),true); },true); })();
btnOffsetMinus.addEventListener('click',()=>setOffset(offset-0.5));
btnOffsetPlus .addEventListener('click',()=>setOffset(offset+0.5));
videoEl.addEventListener('timeupdate',()=>{ if(!cues.length)return; const i=currentIndex(); highlightRow(i); if(loopSentence){ const [s,e]=sentenceRange(i); const t=videoEl.currentTime+offset; if(t>=e-0.02){ videoEl.currentTime=Math.max(0,s-offset+0.0001); videoEl.play(); } } });

function speakText(text, lang){
  if(!text || !('speechSynthesis' in window)) return;
  try{ speechSynthesis.cancel(); }catch{}
  const u=new SpeechSynthesisUtterance(String(text));
  u.lang=lang||'en-US'; u.rate=1.0; u.pitch=1.0; u.volume=1.0;
  speechSynthesis.speak(u);
}

(function(){
  const track = document.getElementById('track');
  const btnExit = document.getElementById('btnExitFocus');
  function toLeft(){ if(!track) return; track.scrollTo({left:0, behavior:'smooth'}); document.body.classList.remove('at-right'); }
  btnExit?.addEventListener('click', toLeft);
  track?.addEventListener('scroll', ()=>{
    if(!track) return;
    const atRight = track.scrollLeft > (track.clientWidth/2);
    document.body.classList.toggle('at-right', atRight);
  }, {passive:true});
})();

(async function init(){
  const saved=localStorage.getItem(`offset:${slug}`); if(saved!=null) setOffset(parseFloat(saved)); else setOffset(0);
  const r=Number(speedRange.value)||1; videoEl.playbackRate=r; speedVal.textContent=`${r.toFixed(2)}x`;
  await loadVideo(); await loadCues(); await loadQuiz(); await loadVocab(); await loadAI();
  showTab('sub');
})();
</script>
</body>
</html>

















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































