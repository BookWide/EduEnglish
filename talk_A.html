<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>BookWide Talkï½œå½±åƒå£èªª MVP</title>

<style>
:root{
  --bg:#0b1220;
  --card:#ffffff;
  --ink:#0f172a;
  --soft:#f1f5f9;
  --brand:#3b82f6;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans TC",sans-serif;
  background:linear-gradient(180deg,#0b1220,#111827);
  color:#111;
}
header{
  height:56px;
  display:flex;
  align-items:center;
  padding:0 16px;
  color:#fff;
  background:rgba(0,0,0,.35);
}
header b{margin-right:8px}
main{
  max-width:1100px;
  margin:20px auto;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}
.card{
  background:var(--card);
  border-radius:18px;
  padding:16px;
  box-shadow:0 20px 50px rgba(0,0,0,.25);
}

/* ===== AI Avatar ===== */
.ai-avatar{
  width:72px;height:72px;
  border-radius:24px;
  overflow:hidden;
  position:relative;
  background:#fff;
  border:1px solid rgba(0,0,0,.08);
  box-shadow:0 12px 26px rgba(0,0,0,.22);
  animation: aiFloat 3.6s ease-in-out infinite;
}
.ai-avatar img{
  width:100%;height:100%;object-fit:cover;
}
@keyframes aiFloat{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-3px)}
}
.ai-avatar.thinking::after{
  content:"";
  position:absolute; inset:-6px;
  border-radius:26px;
  border:2px solid rgba(59,130,246,.45);
  animation: pulse 1.2s ease-out infinite;
}
@keyframes pulse{
  0%{transform:scale(.9);opacity:.2}
  70%{transform:scale(1.1);opacity:.4}
  100%{transform:scale(1.2);opacity:0}
}
.ai-avatar.speaking{
  animation: talk .22s infinite;
}
@keyframes talk{
  0%{transform:scale(1)}
  50%{transform:scale(1.02)}
  100%{transform:scale(1)}
}

/* ===== Camera ===== */
video{
  width:100%;
  border-radius:14px;
  background:#000;
}
button{
  padding:10px 14px;
  border-radius:12px;
  border:none;
  background:var(--brand);
  color:#fff;
  font-weight:600;
  cursor:pointer;
}
button.secondary{
  background:#e5e7eb;
  color:#111;
}
.row{display:flex;gap:10px;flex-wrap:wrap}
.log{
  margin-top:12px;
  background:#f8fafc;
  border-radius:12px;
  padding:12px;
  min-height:120px;
}
.msg{
  margin-bottom:8px;
}
.msg.ai{color:#1e40af}
.msg.you{color:#111}
</style>
</head>

<body>
<header>
  <b>BookWide</b> Talkï½œå½±åƒå£èªª MVP
</header>

<main>
  <!-- LEFT -->
  <div class="card">
    <h3>ğŸ¥ å½±åƒ + èªªè©±</h3>

    <video id="cam" autoplay playsinline muted></video>

    <div class="row" style="margin-top:10px">
      <button onclick="startCam()">é–‹å•Ÿç›¸æ©Ÿ</button>
      <button class="secondary" onclick="stopCam()">é—œé–‰ç›¸æ©Ÿ</button>
      <button onclick="startSpeak()">ğŸ™ï¸ æŒ‰ä½èªªè©±</button>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="card">
    <div class="row" style="align-items:center">
      <div class="ai-avatar" id="aiAvatar">
        <img src="data:image/png;base64,REPLACE_WITH_YOUR_IMAGE_BASE64"/>
      </div>
      <h3 style="margin-left:10px">AI ç¾å¥³è€å¸«</h3>
    </div>

    <div class="log" id="log">
      <div class="msg ai">ğŸ‘©â€ğŸ« Helloï¼è«‹é–‹ç›¸æ©Ÿï¼Œç„¶å¾Œèªªä¸€å¥è‹±æ–‡ã€‚</div>
    </div>
  </div>
</main>

<script>
/* ===== Camera ===== */
let stream;
async function startCam(){
  stream = await navigator.mediaDevices.getUserMedia({video:true,audio:false});
  document.getElementById('cam').srcObject = stream;
}
function stopCam(){
  if(stream) stream.getTracks().forEach(t=>t.stop());
}

/* ===== Speech ===== */
const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
const rec = new SR();
rec.lang = 'en-US';
rec.continuous = false;

rec.onstart = ()=>setAI('thinking');
rec.onresult = e=>{
  const text = e.results[0][0].transcript;
  addMsg('you',text);
  aiReply(text);
};
rec.onend = ()=>setAI('idle');

function startSpeak(){
  rec.start();
}

/* ===== AI Logic (MVP è¦å‰‡ç‰ˆ) ===== */
function aiReply(text){
  setAI('speaking');
  let reply = "Good try! You can say: \"I'm cooking dinner.\"";
  if(text.toLowerCase().includes("cooking")){
    reply = "Great! That sounds natural ğŸ‘";
  }
  setTimeout(()=>{
    addMsg('ai',reply);
    speak(reply);
    setAI('idle');
  },800);
}

/* ===== UI ===== */
function addMsg(who,txt){
  const d=document.createElement('div');
  d.className='msg '+who;
  d.textContent=(who==='ai'?'ğŸ‘©â€ğŸ« ':'ğŸ™‚ ')+txt;
  document.getElementById('log').appendChild(d);
}
function speak(t){
  const u=new SpeechSynthesisUtterance(t);
  u.lang='en-US';
  speechSynthesis.speak(u);
}
function setAI(state){
  const a=document.getElementById('aiAvatar');
  a.classList.remove('thinking','speaking');
  if(state) a.classList.add(state);
}
</script>

</body>
</html>

